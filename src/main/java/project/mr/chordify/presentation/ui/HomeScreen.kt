package project.mr.chordify.presentation.ui

import android.text.Html
import android.util.Log
import android.webkit.WebView
import android.webkit.WebViewClient
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.material.Text
import androidx.compose.runtime.*
import androidx.compose.runtime.getValue
import androidx.compose.runtime.setValue
import androidx.compose.ui.ExperimentalComposeUiApi
import androidx.compose.ui.Modifier
import androidx.compose.ui.viewinterop.AndroidView
import androidx.navigation.compose.rememberNavController

@ExperimentalComposeUiApi
@Composable
fun HomeScreen() {
    val navHostController = rememberNavController()
    Log.d("RECOMPOSE", "HOME_SCREEN")
//    val text = "<!DOCTYPE html><html><body>[Intro]<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>C</b> [ch]D[/ch] [ch]G[/ch] [ch]Em[/ch]    x2<br><br>[Verse 1]<br><br>          [ch]C[/ch]        [ch]D[/ch]<br><br>I used to rule the world<br><br>           [ch]G[/ch]                    [ch]Em[/ch]<br><br>Seas would rise when I gave the word<br><br>                     [ch]C[/ch]      [ch]D[/ch]<br><br>Now in the morning I sleep alone<br><br>          [ch]G[/ch]                 [ch]Em[/ch]<br><br>Sweep the streets I used to own<br><br>[Interlude]<br><br>[ch]C[/ch] [ch]D[/ch] [ch]G[/ch] [ch]Em[/ch]    x2<br><br>[Verse 2]<br><br>          [ch]C[/ch]        [ch]D[/ch]<br><br>I used to roll the dice<br><br>         [ch]G[/ch]                  [ch]Em[/ch]<br><br>Feel the fear in my enemy\'s eyes<br><br>              [ch]C[/ch]           [ch]D[/ch]<br><br>Listen as the crowd would sing:<br><br>         [ch]G[/ch]                      [ch]Em[/ch]<br><br>Now the old king is dead! Long live the king!<br><br>             [ch]C[/ch]        [ch]D[/ch]<br><br>One minute I held the key<br><br>         [ch]G[/ch]                    [ch]Em[/ch]<br><br>Next the walls were closed on me<br><br>                         [ch]C[/ch]       [ch]D[/ch]<br><br>And I discovered that my castles stand<br><br>     [ch]G[/ch]                       [ch]Em[/ch]<br><br>Upon pillars of salt and pillars of sand<br><br>[Chorus]<br><br>  [ch]C[/ch]              [ch]D[/ch]<br><br>I hear Jerusalem bells are ringing<br><br>[ch]G[/ch]             [ch]Em[/ch]<br><br>Roman Cavalry choirs are singing<br><br>[ch]C[/ch]                [ch]D[/ch]<br><br>Be my mirror, my sword, and shield<br><br>   [ch]G[/ch]                 [ch]Em[/ch]<br><br>My missionaries in a foreign field<br><br>[ch]C[/ch]                 [ch]D[/ch]<br><br>For some reason I cant explain<br><br>[ch]G[/ch]                     [ch]Em[/ch]              [ch]C[/ch]      [ch]D[/ch]<br><br>Once you go there was never, never an honest word<br><br>         [ch]Bm[/ch]               [ch]Em[/ch]<br><br>That was when I ruled the world<br><br>[Interlude]<br><br>[ch]C[/ch] [ch]D[/ch] [ch]G[/ch] [ch]Em[/ch]    x2<br><br>[Verse 3]<br><br>                      [ch]C[/ch]    [ch]D[/ch]<br><br>It was the wicked and wild wind<br><br>              [ch]G[/ch]               [ch]Em[/ch]<br><br>Blew down the doors to let me in.<br><br>                          [ch]C[/ch]        [ch]D[/ch]<br><br>Shattered windows and the sound of drums<br><br>       [ch]G[/ch]                     [ch]Em[/ch]<br><br>People couldnt believe what Id become<br><br>         [ch]C[/ch]      [ch]D[/ch]<br><br>Revolutionaries wait<br><br>       [ch]G[/ch]                [ch]Em[/ch]<br><br>For my head on a silver plate<br><br>                   [ch]C[/ch]      [ch]D[/ch]<br><br>Just a puppet on a lonely string<br><br>   [ch]G[/ch]                         [ch]Em[/ch]<br><br>Oh who would ever want to be king?<br><br>[Chorus]<br><br>  [ch]C[/ch]              [ch]D[/ch]<br><br>I hear Jerusalem bells are ringing<br><br>[ch]G[/ch]             [ch]Em[/ch]<br><br>Roman Cavalry choirs are singing<br><br>[ch]C[/ch]                [ch]D[/ch]<br><br>Be my mirror, my sword, and shield<br><br>   [ch]G[/ch]                 [ch]Em[/ch]<br><br>My missionaries in a foreign field<br><br>[ch]C[/ch]                 [ch]D[/ch]<br><br>For some reason I cant explain<br><br>  [ch]G[/ch]                      [ch]Em[/ch]<br><br>I know Saint Peter won\'t call my name,<br><br>         [ch]C[/ch]      [ch]D[/ch]<br><br>never an honest word<br><br>             [ch]Bm[/ch]               [ch]Em[/ch]<br><br>But that was when I ruled the world<br><br>[Interlude]<br><br>[ch]C[/ch]  [ch]Em[/ch] x3<br><br>[ch]D[/ch]  [ch]D[/ch]<br><br>  [ch]C[/ch]   [ch]D[/ch]    [ch]G[/ch]   [ch]Em[/ch]<br><br>Ohhhhhh  Ohhhhhhh<br><br>  [ch]C[/ch]   [ch]D[/ch]    [ch]G[/ch]   [ch]Em[/ch]<br><br>Ohhhhhh  Ohhhhhhh<br><br>[Chorus]<br><br>  [ch]C[/ch]              [ch]D[/ch]<br><br>I hear Jerusalem bells are ringing<br><br>[ch]G[/ch]             [ch]Em[/ch]<br><br>Roman Cavalry choirs are singing<br><br>[ch]C[/ch]                [ch]D[/ch]<br><br>Be my mirror, my sword, and shield<br><br>   [ch]G[/ch]                 [ch]Em[/ch]<br><br>My missionaries in a foreign field<br><br>[ch]C[/ch]                 [ch]D[/ch]<br><br>For some reason I can\'t explain<br><br>  [ch]G[/ch]                      [ch]Em[/ch]<br><br>I know Saint Peter won\'t call my name,<br><br>         [ch]C[/ch]      [ch]D[/ch]<br><br>never an honest word<br><br>             [ch]Bm[/ch]               [ch]Em[/ch]<br><br>But that was when I ruled the world<br><br>[Outro]        <br><br>[ch]C[/ch]    [ch]D[/ch]  [ch]Bm[/ch]   [ch]Em[/ch]<br><br>Oooooh  Ooooooh<br><br>[ch]C[/ch]    [ch]D[/ch]  [ch]Bm[/ch]   [ch]Em[/ch]<br><br>Oooooh  Ooooooh                </body>                </html>                "
    val text = "'<!DOCTYPE html><html><body><pre>[Intro]<br><br><b>C</b>  <b>D</b>  <b>G</b>  <b>Em</b>     x2<br><br>[Verse 1]<br><br>          <b>C</b>         <b>D</b> <br><br>I used to rule the world<br><br>           <b>G</b>                     <b>Em</b> <br><br>Seas would rise when I gave the word<br><br>                     <b>C</b>       <b>D</b> <br><br>Now in the morning I sleep alone<br><br>          <b>G</b>                  <b>Em</b> <br><br>Sweep the streets I used to own<br><br>[Interlude]<br><br><b>C</b>  <b>D</b>  <b>G</b>  <b>Em</b>     x2<br><br>[Verse 2]<br><br>          <b>C</b>         <b>D</b> <br><br>I used to roll the dice<br><br>         <b>G</b>                   <b>Em</b> <br><br>Feel the fear in my enemy\\'s eyes<br><br>              <b>C</b>            <b>D</b> <br><br>Listen as the crowd would sing:<br><br>         <b>G</b>                       <b>Em</b> <br><br>\"Now the old king is dead! Long live the king!\"<br><br>             <b>C</b>         <b>D</b> <br><br>One minute I held the key<br><br>         <b>G</b>                     <b>Em</b> <br><br>Next the walls were closed on me<br><br>                         <b>C</b>        <b>D</b> <br><br>And I discovered that my castles stand<br><br>     <b>G</b>                        <b>Em</b> <br><br>Upon pillars of salt and pillars of sand<br><br>[Chorus]<br><br>  <b>C</b>               <b>D</b> <br><br>I hear Jerusalem bells are ringing<br><br><b>G</b>              <b>Em</b> <br><br>Roman Cavalry choirs are singing<br><br><b>C</b>                 <b>D</b> <br><br>Be my mirror, my sword, and shield<br><br>   <b>G</b>                  <b>Em</b> <br><br>My missionaries in a foreign field<br><br><b>C</b>                  <b>D</b> <br><br>For some reason I can\\'t explain<br><br><b>G</b>                      <b>Em</b>               <b>C</b>       <b>D</b> <br><br>Once you go there was never, never an honest word<br><br>         <b>Bm</b>                <b>Em</b> <br><br>That was when I ruled the world<br><br>[Interlude]<br><br><b>C</b>  <b>D</b>  <b>G</b>  <b>Em</b>     x2<br><br>[Verse 3]<br><br>                      <b>C</b>     <b>D</b> <br><br>It was the wicked and wild wind<br><br>              <b>G</b>                <b>Em</b> <br><br>Blew down the doors to let me in.<br><br>                          <b>C</b>         <b>D</b> <br><br>Shattered windows and the sound of drums<br><br>       <b>G</b>                      <b>Em</b> <br><br>People couldn\\'t believe what I\\'d become<br><br>         <b>C</b>       <b>D</b> <br><br>Revolutionaries wait<br><br>       <b>G</b>                 <b>Em</b> <br><br>For my head on a silver plate<br><br>                   <b>C</b>       <b>D</b> <br><br>Just a puppet on a lonely string<br><br>   <b>G</b>                          <b>Em</b> <br><br>Oh who would ever want to be king?<br><br>[Chorus]<br><br>  <b>C</b>               <b>D</b> <br><br>I hear Jerusalem bells are ringing<br><br><b>G</b>              <b>Em</b> <br><br>Roman Cavalry choirs are singing<br><br><b>C</b>                 <b>D</b> <br><br>Be my mirror, my sword, and shield<br><br>   <b>G</b>                  <b>Em</b> <br><br>My missionaries in a foreign field<br><br><b>C</b>                  <b>D</b> <br><br>For some reason I can\\'t explain<br><br>  <b>G</b>                       <b>Em</b> <br><br>I know Saint Peter won\\'t call my name,<br><br>         <b>C</b>       <b>D</b> <br><br>never an honest word<br><br>             <b>Bm</b>                <b>Em</b> <br><br>But that was when I ruled the world<br><br>[Interlude]<br><br><b>C</b>   <b>Em</b>  x3<br><br><b>D</b>   <b>D</b> <br><br>  <b>C</b>    <b>D</b>     <b>G</b>    <b>Em</b> <br><br>Ohhhhhh  Ohhhhhhh<br><br>  <b>C</b>    <b>D</b>     <b>G</b>    <b>Em</b> <br><br>Ohhhhhh  Ohhhhhhh<br><br>[Chorus]<br><br>  <b>C</b>               <b>D</b> <br><br>I hear Jerusalem bells are ringing<br><br><b>G</b>              <b>Em</b> <br><br>Roman Cavalry choirs are singing<br><br><b>C</b>                 <b>D</b> <br><br>Be my mirror, my sword, and shield<br><br>   <b>G</b>                  <b>Em</b> <br><br>My missionaries in a foreign field<br><br><b>C</b>                  <b>D</b> <br><br>For some reason I can\\'t explain<br><br>  <b>G</b>                       <b>Em</b> <br><br>I know Saint Peter won\\'t call my name,<br><br>         <b>C</b>       <b>D</b> <br><br>never an honest word<br><br>             <b>Bm</b>                <b>Em</b> <br><br>But that was when I ruled the world<br><br>[Outro]        <br><br><b>C</b>     <b>D</b>   <b>Bm</b>    <b>Em</b> <br><br>Oooooh  Ooooooh<br><br><b>C</b>     <b>D</b>   <b>Bm</b>    <b>Em</b> <br><br>Oooooh  Ooooooh</pre></body></html>"
        Box(modifier = Modifier.fillMaxWidth()) {
        Column(modifier = Modifier.fillMaxWidth()) {
            AndroidView(factory = {
                WebView(it).apply {
                    webViewClient = WebViewClient()
                    loadData(text, "text/html; charset=utf-8", "UTF-8")
//                    loadUrl("http://10.0.2.2:5000/chords?tab=coldplay/viva-la-vida-chords-675427")
                }
            })
//            Text(text = Html.fromHtml(text, Html.FROM_HTML_MODE_COMPACT).toString())
        }
    }

}